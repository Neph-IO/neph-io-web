{{ define "main" }}
<style>
.terminal {
  width: 90%;
  max-width: 800px;
  height: 70vh;
  background-color: #050505;
  border: 2px solid #a7c080;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 0 20px rgba(167, 192, 128, 0.7);
  position: relative;
  overflow: hidden;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
}

/* Effet CRT renforcé */
.terminal:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.3) 50%), 
    linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
  background-size: 100% 2px, 3px 100%;
  pointer-events: none;
  z-index: 10;
}

/* Ligne de scan */
.terminal:after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: rgba(167, 192, 128, 0.15);
  box-shadow: 0 0 10px rgba(167, 192, 128, 0.3);
  animation: scanline 6s linear infinite;
  z-index: 11;
}

@keyframes scanline {
  0% { top: 0%; }
  100% { top: 100%; }
}

.terminal-header {
  text-align: center;
  padding-bottom: 15px;
  border-bottom: 1px solid #a7c080;
  margin-bottom: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.logoway {
  width: 40px;
  height: 40px;
  margin-right: 15px;
  fill: #a7c080;
  position: relative;
  top: 15px;
}

h1 {
  font-size: 2.5rem;
  margin: 0;
  padding: 0;
  color: #a7c080;
  animation: flicker 2s infinite alternate;
  text-align: center;
  line-height: 1;
  position: relative;
  bottom: 5px;
}

/* Écran de boot */
.boot-screen {
  flex-grow: 1;
  overflow: hidden;
  position: relative;
  font-family: monospace;
  color: #a7c080;
  padding-top: 10px;
}

.boot-log {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: auto;
  transition: top 0.5s ease-out;
}

.log-line {
  margin: 0;
  padding: 3px 0;
  font-size: 0.9rem;
  transition: opacity 0.3s;
  white-space: nowrap;
  overflow: hidden;
}

/* Ajout d'un séparateur visuel */
.section-separator {
  margin: 15px 0;
  border-top: 1px dashed #a7c080;
  position: relative;
  opacity: 0.7;
}

.section-separator:after {
  content: "// NETWORK LINKS";
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #050505;
  padding: 0 15px;
  font-size: 0.8rem;
  color: #a7c080;
}

.loading-section {
  margin-top: auto;
  width: 100%;
  max-width: 100%;
}

.loading-item {
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  width: 100%;
  white-space: nowrap; /* Empêche le retour à la ligne */
  padding: 2px 0; /* Ajoute un peu d'espace vertical */
}

/* Modifié pour avoir une largeur fixe pour tous les labels */
.loading-label {
  width: 200px; /* Largeur fixe pour tous les labels */
  text-align: left;
  margin-right: 10px;
  color: #a7c080;
  font-size: 0.9rem;
  flex-shrink: 0; /* Empêche le rétrécissement */
}

.progress-bar-container {
  flex-grow: 1;
  height: 15px;
  background-color: #111;
  border-radius: 0;
  border: 1px solid #a7c080;
  overflow: hidden;
  min-width: 150px;
}

.progress-bar {
  height: 100%;
  width: 0;
  background-color: #a7c080;
  border-radius: 0;
  position: relative;
  transition: width 2s ease-in-out;
}

/* Effet de dégradé pour la progress bar */
.progress-bar:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    to right,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.3) 2px,
    rgba(0, 0, 0, 0.3) 4px
  );
}

.status {
  display: inline-block;
  width: 60px;
  text-align: right;
  margin-left: 10px;
  color: #a7c080;
  font-size: 0.9rem;
  flex-shrink: 0; /* Empêche le rétrécissement */
}

.system-info {
  margin-top: 10px;
  border-top: 1px solid #a7c080;
  padding-top: 10px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 5px;
}

.info-item {
  font-size: 0.85rem;
  display: flex;
}

.info-label {
  color: #a7c080;
  opacity: 0.9;
  width: 130px;
}

.info-value {
  color: #a7c080;
}

.flicker {
  animation: flicker 4s infinite alternate;
}

@keyframes flicker {
  0%, 100% { opacity: 1; }
  92% { opacity: 1; }
  93% { opacity: 0.6; }
  94% { opacity: 1; }
  95% { opacity: 0.9; }
  96% { opacity: 1; }
  97% { opacity: 0.5; }
  98% { opacity: 1; }
}

.network-link {
  text-decoration: none;
  color: #a7c080;
  cursor: pointer;
  display: block;
  width: 100%;
  transition: all 0.3s ease;
}

.network-link:hover {
  background-color: rgba(167, 192, 128, 0.1);
  border-radius: 5px;
}

.network-link:hover .progress-bar {
  background-color: #c5e0a0;
}

.network-link:hover .loading-label {
  text-decoration: underline;
  color: #c5e0a0;
}

.blink {
  animation: blink 1s step-end infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* Style pour le texte qui défile rapidement */
.fast-scroll {
  animation: fastScroll 0.1s linear infinite;
  white-space: nowrap;
}

@keyframes fastScroll {
  from { transform: translateY(0); }
  to { transform: translateY(-10px); }
}

/* Scintillement global de l'écran */
@keyframes screenGlitch {
  0% { filter: none; }
  0.5% { filter: brightness(1.1) contrast(1.3); }
  1% { filter: none; }
  2% { filter: brightness(0.9); }
  2.5% { filter: none; }
  92% { filter: none; }
  92.5% { filter: brightness(1.2) contrast(1.5); }
  93% { filter: none; }
}
</style>

<div class="terminal" id="terminal">
  <div class="terminal-header">
    <svg class="logoway" viewBox="0 0 24 24">
      <path d="M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M11,7V11H7V13H11V17H13V13H17V11H13V7H11Z" />
    </svg>
    <h1>NEPH-IO</h1>
  </div>
  
  <div class="boot-screen">
    <div id="boot-log" class="boot-log">
      <!-- Les messages de boot seront générés en JS -->
    </div>
  </div>
  
  <!-- Ajout du séparateur visuel -->
  <div class="section-separator"></div>
  
  <div class="loading-section">
    <a href="https://github.com/neph-io" class="network-link" target="_blank">
      <div class="loading-item">
        <div class="loading-label">> LOADING GITHUB...</div>
        <div class="progress-bar-container">
          <div class="progress-bar" id="github-bar"></div>
        </div>
        <div class="status" id="github-status">0%</div>
      </div>
    </a>
    
    <a href="https://instagram.com/nep.mainichi/" class="network-link" target="_blank">
      <div class="loading-item">
        <div class="loading-label">> LOADING INSTAGRAM...</div>
        <div class="progress-bar-container">
          <div class="progress-bar" id="insta-bar"></div>
        </div>
        <div class="status" id="insta-status">0%</div>
      </div>
    </a>
    
    <a href="mailto:nephereth@gmail.com" class="network-link" target="_blank">
      <div class="loading-item">
        <div class="loading-label">> LOADING EMAIL...</div>
        <div class="progress-bar-container">
          <div class="progress-bar" id="linkedin-bar"></div>
        </div>
        <div class="status" id="linkedin-status">0%</div>
      </div>
    </a>
  </div>
  
  <div class="system-info">
    <div class="info-item">
      <div class="info-label">HOSTNAME:</div>
      <div class="info-value">NEPH-IO</div>
    </div>
    <div class="info-item">
      <div class="info-label">NATIONALITY</div>
      <div class="info-value">FRENCH</div>
    </div>
    <div class="info-item">
      <div class="info-label">OCCUPATION</div>
      <div class="info-value">NET/SYS ADMIN</div>
    </div>
    <div class="info-item">
      <div class="info-label">HOBBY</div>
      <div class="info-value">CODE / PHOTO / POETRY</div>
    </div>
    <div class="info-item">
      <div class="info-label">XP:</div>
      <div class="info-value">10+ YEARS</div>
    </div>
    <div class="info-item">
      <div class="info-label">LOCATION:</div>
      <div class="info-value">OSAKA, JP</div>
    </div>
    <div class="info-item">
      <div class="info-label">UPTIME:</div>
      <div class="info-value" id="uptime">0d 0h 0m 0s</div>
    </div>
    <div class="info-item">
      <div class="info-label">LOCAL TIME:</div>
      <div class="info-value" id="localtime">00:00:00</div>
    </div>
  </div>
</div>

<script>
  // Messages de boot inspirés des ordinateurs dans Alien
  const bootMessages = [
    "WEYLAND-YUTANI CORP. BIOSYSTEM INTERFACE V7.6",
    "SYSTEM BIOS REVISION 8.3.2 - COPYRIGHT 2124",
    "PERFORMING MEMORY DIAGNOSTICS...",
    "16TB RAM DETECTED - VERIFICATION COMPLETE",
    "NEURAL PROCESSING UNIT ONLINE",
    "QUANTUM CRYPTOGRAPHY MODULE INITIALIZED",
    "LOADING KERNEL... DONE",
    "INITIALIZING PRIMARY NAVIGATION SYSTEMS...",
    "CHECKING NAVIGATION DATABASE INTEGRITY...",
    "LOADING STELLAR CARTOGRAPHY MODULE...",
    "INITIALIZING LIFE SUPPORT SYSTEMS...",
    "ATMOSPHERIC PROCESSORS: NOMINAL",
    "CRYOGENIC SYSTEMS: STAND-BY",
    "INITIATING NETWORK CONNECTION...",
    "CONNECTING TO NOSTROMO INTRANET...",
    "ESTABLISHING SECURE CONNECTION...",
    "ACCESSING CREW DATABASE...",
    "CREW STATUS: ALL PROFILES ACTIVE",
    "MISSION PROTOCOL: STANDARD COMMERCIAL TOW",
    "CARGO: REFINERY PROCESSING 20M TONS OF ORE",
    "CHECKING SHIP INTEGRITY...",
    "HULL INTEGRITY: 99%",
    "LOADING SPECIAL ORDER 937...",
    "...",
    "...",
    "ORDER CLASSIFIED - SCIENCE OFFICER EYES ONLY",
    "INITIATING PRIMARY DATA INTERFACE...",
    "SYSTEM INITIALIZATION COMPLETE",
    "> READY",
    ">"
  ];

  // Fonction pour ajouter des messages de boot avec un délai
  function displayBootMessages() {
    const bootLog = document.getElementById('boot-log');
    let delay = 100;
    let totalHeight = 0;
    
    bootMessages.forEach((message, index) => {
      setTimeout(() => {
        const logLine = document.createElement('p');
        logLine.className = 'log-line';
        logLine.textContent = message;
        
        if (message === ">") {
          logLine.className += ' blink';
        }
        
        bootLog.appendChild(logLine);
        
        // Faire défiler vers le bas si nécessaire
        totalHeight += logLine.offsetHeight || 20;
        
        if (totalHeight > document.querySelector('.boot-screen').offsetHeight) {
          const offset = totalHeight - document.querySelector('.boot-screen').offsetHeight;
          bootLog.style.top = -offset + 'px';
        }
      }, delay);
      
      // Délai aléatoire entre les messages pour un effet réaliste
      delay += Math.random() * 300 + 100;
      
      // Plus long délai pour les messages spéciaux
      if (message === "..." || message === "ORDER CLASSIFIED - SCIENCE OFFICER EYES ONLY") {
        delay += 800;
      }
    });
  }

  // Animation des barres de progression
  function animateLoading(id, delay) {
    setTimeout(function() {
      const bar = document.getElementById(id + '-bar');
      const status = document.getElementById(id + '-status');
      let width = 0;
      
      const interval = setInterval(function() {
        if (width >= 100) {
          clearInterval(interval);
          status.textContent = "READY";
        } else {
          width += Math.random() * 5;
          if (width > 100) width = 100;
          bar.style.width = width + '%';
          status.textContent = Math.floor(width) + '%';
        }
      }, 100);
    }, delay);
  }
  
  // Animer chaque barre avec un délai différent
  animateLoading('github', 1000);
  animateLoading('insta', 2000);
  animateLoading('linkedin', 3000);
  
  // Mettre à jour l'uptime
  let seconds = 0;
  setInterval(function() {
    seconds++;
    const days = Math.floor(seconds / (24 * 60 * 60));
    const hours = Math.floor((seconds % (24 * 60 * 60)) / (60 * 60));
    const minutes = Math.floor((seconds % (60 * 60)) / 60);
    const remainingSeconds = seconds % 60;
    
    document.getElementById('uptime').textContent = 
      days + 'd ' + hours + 'h ' + minutes + 'm ' + remainingSeconds + 's';
  }, 1000);
  
  // Mettre à jour l'heure locale
  function updateLocalTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('fr-FR', { hour12: false });
    document.getElementById('localtime').textContent = timeString;
  }
  
  updateLocalTime();
  setInterval(updateLocalTime, 1000);
  
  // Ajouter un effet de scintillement aléatoire
  setInterval(function() {
    if (Math.random() > 0.97) {
      document.getElementById('terminal').style.animation = 'screenGlitch 0.5s';
      setTimeout(function() {
        document.getElementById('terminal').style.animation = '';
      }, 500);
    }
  }, 500);
  
  // Démarrer l'affichage des messages de boot
  window.onload = function() {
    displayBootMessages();
  };
</script>
{{ end }}