{{ define "main" }}
  <h1>Photography</h1>

  <div class="portfolio-grid">
    {{ range .Pages }}
    <div class="portfolio-item">
      {{ $image := .Params.image }}
      {{ $title := .Title | htmlEscape | safeJS }}
      {{ $caption := .Params.caption | htmlEscape | safeJS }}

      {{ with .Resources.GetMatch $image }}
        {{ $webp := .Resize "600x webp" }}
        <div class="portfolio-img-wrapper"
             onclick="openLightbox('{{ .RelPermalink }}', '{{ $title }}', '{{ $caption }}')">
          <img src="{{ $webp.RelPermalink }}" alt="{{ $.Title }}">
          <div class="portfolio-caption">
            <div class="caption-title">{{ $.Title }}</div>
          </div>
        </div>
      {{ end }}
    </div>
    {{ end }}
  </div>

  <!-- Lightbox -->
  <div id="lightbox" onclick="closeLightbox(event)">
    <img id="lightbox-img" src="" alt="">
    <div id="lightbox-caption"></div>
  </div>
{{ end }}
