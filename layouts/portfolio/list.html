{{ define "main" }}
<h1>Photography</h1>

<div class="portfolio-grid">
  {{ range $index, $page := .Pages }}
    <div class="portfolio-item">
      {{ $image := $page.Params.image }}
      {{ $title := $page.Params.title | htmlEscape | safeJS }}
      {{ $caption := $page.Params.caption | htmlEscape | safeJS }}

      {{ with $page.Resources.GetMatch $image }}
        {{ $webp := .Resize "600x webp" }}
        <div class="portfolio-img-wrapper"
             data-caption="{{ $caption }}"
             data-full="{{ .RelPermalink }}"
             onclick="openLightbox({{ $index }})">
          <img src="{{ $webp.RelPermalink }}" alt="{{ $title }}" loading="lazy">
          <div class="portfolio-caption">
            <div class="caption-title">{{ $title }}</div>
          </div>
        </div>
      {{ end }}
    </div>
  {{ end }}
</div>

<!-- Lightbox -->
<div id="lightbox" onclick="closeLightbox(event)">
  <button id="prevBtn" class="lightbox-nav left" onclick="prevImage(event)">&#10094;</button>
  <img id="lightbox-img" src="" alt="">
  <button id="nextBtn" class="lightbox-nav right" onclick="nextImage(event)">&#10095;</button>
  <div id="lightbox-caption"></div>
</div>
{{ end }}
